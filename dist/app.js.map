{"version":3,"sources":["webpack://vuexl/webpack/universalModuleDefinition","webpack://vuexl/webpack/bootstrap","webpack://vuexl/external \"lodash\"","webpack://vuexl/external \"vue-class-component\"","webpack://vuexl/./src/symbols.ts","webpack://vuexl/./src/util.ts","webpack://vuexl/./src/module.ts","webpack://vuexl/./src/decorators.ts","webpack://vuexl/./src/register.ts","webpack://vuexl/./src/map-helper.ts","webpack://vuexl/./src/index.ts"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","require","sLocalStoreChannelName","Symbol","sLocalStoreStatus","sLocalStoreCounter","getChannelName","vm","getLocalStoreName","localStoreStatus","connectedLocalStoreName","localConnectedName","localStatus","currentVm","_a","localName","$parent","getModuleByNameSpace","store","namespace","separator","myNameSpace","external_lodash_","_modulesNamespaceMap","Error","joinNameSpace","localStoreName","localStoreChannelName","getNameSpace","isLocal","join","getLocalStoreGetter","$store","$isServer","getStateGetter","_b","context","state","getters","getLocalStateGetter","getLocalMutationGetter","args","_i","arguments","length","commit","apply","concat","getMutationGetter","getLocalGetterGetter","getGetterGetter","getLocalActionGetter","dispatch","getActionGetter","LocalStore","_store","options","target","key","localStore","decoratorFactory","runner","option","_key","myOptions","myOthers","others","setDecorator","LocalState","LocalMutation","LocalAction","LocalGetter","getNameNumber","amount","localStoreCounter","registerLocal","localChannelName","$options","_c","isUsingName","_d","isUsingSameStore","_e","numberingSeparator","myLocalStoreName","getName","registerModule","namespaced","confirmChannel","channelName","Boolean","isLocalStore","__assign","unregisterLocal","getLocalStoreState","count","unregisterModule","mapFactory","maps","result","map","registered","mapLocalActions","mapLocalGetters","mapLocalMutations","mapLocalState","setLocalStore","targetVue","extends","beforeCreate","install","vue","isNuxt","external_vue_class_component_default","a","registerHooks","mixin","created","$localStore","myLocalStore","data","beforeDestroy","Component"],"mappings":"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","file":"app.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"vuexl\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vuexl\"] = factory();\n\telse\n\t\troot[\"vuexl\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","module.exports = require(\"lodash\");","module.exports = require(\"vue-class-component\");","export const sLocalStoreChannelName = Symbol('localStoreChannel')\nexport const sLocalStoreStatus = Symbol('localStoreStatus')\nexport const sLocalStoreCounter = Symbol('localStoreCounter')\n","import {sLocalStoreChannelName, sLocalStoreStatus} from './symbols'\nimport {IStoreVue} from './type'\nexport const getChannelName = (vm: IStoreVue<any>): string | undefined => {\n  return vm[sLocalStoreChannelName]\n}\n\nexport const getLocalStoreState = (vm: IStoreVue<any>) => {\n  return vm[sLocalStoreStatus] || {}\n}\n\nexport const getLocalStoreName = (vm: IStoreVue<any>): string | undefined => {\n  if(!vm){return}\n  // if already it has connected LocalName\n  let localStoreStatus = vm[sLocalStoreStatus]\n  if(!localStoreStatus){\n    localStoreStatus = {}\n    vm[sLocalStoreStatus] = localStoreStatus\n  }\n  const connectedLocalStoreName = localStoreStatus.localConnectedName\n  if(connectedLocalStoreName){\n    return connectedLocalStoreName\n  }\n  // start upper search til getting localName\n  let currentVm = vm\n  let localStatus\n  while(currentVm){\n    localStatus = currentVm[sLocalStoreStatus]\n    if(!localStatus){\n      localStatus = {}\n      currentVm[sLocalStoreStatus] = localStatus\n    }\n    const {localName = null} = localStatus\n    if(localName){\n      // save connected name for performance to find name again\n      vm[sLocalStoreStatus].localConnectedName = localName\n      return localName\n    }\n    currentVm = currentVm.$parent\n  }\n  // if cannot find any local Store throw Error because vm won't work without local store\n}\n","import {isArray, isFunction, isString, trimEnd} from 'lodash'\nimport {TActionGetter, TGetterGetter, TMutationGetter, TStateGetter} from './type'\nimport {getChannelName, getLocalStoreName} from './util'\n\nexport const getModuleByNameSpace = (store: any, namespace, separator = '/') => {\n  const myNameSpace = trimEnd(namespace, separator) + separator\n  const module = store._modulesNamespaceMap[myNameSpace]\n  if(!module){\n    throw new Error(`[Vuexl getModuleByNameSpace] cannot fine in ${namespace}`)\n  }\n  return module\n}\n\nexport const joinNameSpace = (localStoreName, localStoreChannelName) => {\n  return localStoreChannelName ?\n    `${localStoreChannelName}/${localStoreName}` : localStoreName\n}\n\nexport const getNameSpace = (vm: any, namespace: string | string[], isLocal: boolean = false) => {\n  let myNameSpace\n  if(isLocal){\n    const localStoreName: string | undefined = getLocalStoreName(vm)\n    if(!localStoreName){return}\n    const localStoreChannelName: string = getChannelName(vm)\n    myNameSpace = joinNameSpace(localStoreName, localStoreChannelName)\n  }else if(isArray(namespace)){\n    myNameSpace = namespace.join('/')\n  }else{\n    myNameSpace = namespace\n  }\n  return myNameSpace\n}\n\nexport const getLocalStoreGetter = (getter?: TGetterGetter) => {\n  return function() {\n    const {$store, $isServer} = this\n    if(!$store || $isServer || !getter){return}\n    return getModuleByNameSpace($store, getNameSpace(this, null, true))\n  }\n}\n\nexport const getStateGetter = (\n  getter?: TStateGetter,\n  namespace?: string | string[],\n  isLocal: boolean = false,\n) => {\n  return function() {\n    const {$store, $isServer} = this\n    if(!$store || $isServer || !getter){return}\n    const module = getModuleByNameSpace($store, getNameSpace(this, namespace, isLocal))\n    const {state, getters} = module.context\n    if(!state){return}\n    if(isFunction(getter)){\n      return getter.call(this, state, getters)\n    }\n    if(isString(getter)){\n      return state[getter]\n    }\n  }\n}\n\nexport const getLocalStateGetter = (getter?: TStateGetter) => {\n  // tslint:disable-next-line: only-arrow-functions\n  return getStateGetter(getter, null, true)\n}\n\nexport const getMutationGetter = (\n  getter?: TMutationGetter,\n  namespace?: string | string[],\n  isLocal: boolean = false,\n) => {\n  return function(...args: any[]) {\n    const {$store, $isServer} = this\n    if(!$store || $isServer || !getter){return}\n    const module = getModuleByNameSpace($store, getNameSpace(this, namespace, isLocal))\n    const {commit} = module.context\n    if(isFunction(getter)){\n      return getter.apply(this, [commit, ...args])\n    }\n    return commit.apply($store, [getter, ...args])\n  }\n}\n\nexport const getLocalMutationGetter = (getter?: TMutationGetter) => {\n  // tslint:disable-next-line: only-arrow-functions\n  return getMutationGetter(getter, null, true)\n}\n\nexport const getGetterGetter = (\n  getter?: TGetterGetter,\n  namespace?: string | string[],\n  isLocal: boolean = false,\n) => {\n  return function() {\n    const {$store, $isServer} = this\n    if(!$store || $isServer || !getter){return}\n    return $store.getters[\n      `${getNameSpace(this, namespace, isLocal)}/${getter}`\n      ]\n  }\n}\n\nexport const getLocalGetterGetter = (getter?: TGetterGetter) => {\n  // tslint:disable-next-line: only-arrow-functions\n  return getGetterGetter(getter, null, true)\n}\n\nexport const getActionGetter = (\n  getter?: TActionGetter,\n  namespace?: string | string[],\n  isLocal: boolean = false,\n) => {\n  // tslint:disable-next-line: only-arrow-functions\n  return function(...args: any[]) {\n    const {$store, $isServer} = this\n    if(!$store || $isServer || !getter){return}\n    const module = getModuleByNameSpace($store, getNameSpace(this, namespace, isLocal))\n    const {dispatch} = module.context\n    if(isFunction(getter)){\n      return getter.apply(this, [dispatch, ...args])\n    }\n    return dispatch.apply(this, [getter, ...args])\n  }\n}\n\nexport const getLocalActionGetter = (getter?: TActionGetter) => {\n  return getActionGetter(getter, null, true)\n}\n","import {isFunction, isString} from 'lodash'\nimport {\n  getLocalActionGetter,\n  getLocalGetterGetter,\n  getLocalMutationGetter,\n  getLocalStateGetter,\n  getLocalStoreGetter,\n  getStateGetter,\n} from './module'\nimport {\n  ISetModuleNameOptions,\n  TDecoratorFactoryRunner,\n} from './type'\n\n// eslint-disable-next-line func-style\nexport function LocalStore(\n  _store: any,\n  options: ISetModuleNameOptions = {},\n): any {\n  // tslint:disable-next-line\n  return function(target: any, key: string) {\n    if(target.localStore){\n      throw new Error('[vuexl] omg')\n    }\n    Object.defineProperty(target, '$localStore', {\n      // tslint:disable-next-line\n      value: function() {\n        return {\n          name: key,\n          store: _store,\n          options,\n        }\n      },\n    })\n    Object.defineProperty(target, key, {\n      get: getLocalStoreGetter(key),\n    })\n  }\n}\n\n// eslint-disable-next-line func-style\nexport function decoratorFactory(runner: TDecoratorFactoryRunner): any {\n  // tslint:disable-next-line\n  return function(option: any, _key?, ...others) {\n    let myOptions, myOthers\n    // tslint:disable-next-line\n    const setDecorator = function(target: any, key: string | symbol) {\n      return runner.call(this, target, key, myOptions, ...myOthers)\n    }\n    if(!isString(option) && !isFunction(option)){\n      return setDecorator(option, _key)\n    }\n    myOptions = option\n    myOthers = [_key].concat(others)\n    return setDecorator\n  }\n}\n\n// tslint:disable-next-line\nexport const LocalState = decoratorFactory(function(target, key, option) {\n  const getter: any = option? option: key\n  Object.defineProperty(target, key, {\n    get: getLocalStateGetter(getter),\n  })\n})\n\n// tslint:disable-next-line\nexport const State = decoratorFactory(function(target, key, option, namespace) {\n  const getter: any = option? option: key\n  Object.defineProperty(target, key, {\n    get: getStateGetter(getter, namespace, false),\n  })\n})\n\n// tslint:disable-next-line\nexport const LocalMutation = decoratorFactory(function(target, key, option) {\n  const getter: any = option? option : key\n  Object.defineProperty(target, key, {\n    value: getLocalMutationGetter(getter),\n  })\n})\n\n// tslint:disable-next-line\nexport const LocalAction = decoratorFactory(function(target, key, option) {\n  const getter: any = option? option : key\n  Object.defineProperty(target, key, {\n    value: getLocalActionGetter(getter),\n  })\n})\n\n// tslint:disable-next-line\nexport const LocalGetter = decoratorFactory(function(target, key, option) {\n  const getter: any = option? option : key\n  Object.defineProperty(target, key, {\n    get: getLocalGetterGetter(getter),\n  })\n})\n","import {cloneDeep, isNil} from 'lodash'\nimport {Module, Store} from 'vuex'\nimport {joinNameSpace} from './module'\nimport {sLocalStoreCounter, sLocalStoreStatus} from './symbols'\nimport {ILocalStoreOptions, ISetModuleNameOptions, IStoreVue} from './type'\nimport {getChannelName, getLocalStoreName, getLocalStoreState} from './util'\nconst INIT_NUMBER = 0\nexport const getNameNumber = (\n  vm: IStoreVue<any>,\n  name: string,\n  amount: number = 1,\n): number => {\n  const localStoreCounter = vm[sLocalStoreCounter]\n  if(isNil(localStoreCounter[name])){\n    localStoreCounter[name] = INIT_NUMBER\n    return INIT_NUMBER\n  }\n  localStoreCounter[name] += amount\n  return localStoreCounter[name]\n}\n\nexport const getName = (\n  vm: IStoreVue<any>,\n  localStoreName?: string,\n  options: ISetModuleNameOptions = {},\n): string => {\n  const {$options: {name = 'unknown'} = {}} = vm\n  const {\n    isUsingName = true,\n    isUsingSameStore = false,\n    numberingSeparator = '-',\n  } = options\n  const myLocalStoreName = localStoreName &&\n    isUsingName ? localStoreName : name\n  if(isUsingSameStore){\n    // just counting\n    getNameNumber(vm, myLocalStoreName)\n    return myLocalStoreName\n  }\n  return `${myLocalStoreName}${numberingSeparator}${getNameNumber(vm, myLocalStoreName)}`\n}\n\nconst confirmChannel = (vm: IStoreVue<any>, name?: string): void => {\n  const {$store} = vm\n  if(name && !$store.state[name]){\n    $store.registerModule(name, {\n      namespaced: true,\n    })\n  }\n}\n\nconst isLocalStore = (store: Store<any>, localName: string, channelName?: string): boolean => {\n  const {state} = store\n  return Boolean(channelName ? state[channelName][localName] : state[localName])\n\n}\n\nexport const registerLocal = (\n  vm: IStoreVue<any>,\n  store: Module<any, any>,\n  localStoreName: string,\n  options: ISetModuleNameOptions = {},\n): void => {\n  // $isServer is for Nuxt.\n  const {$store = null, $isServer} = vm\n  // isServer checking is for Nuxt\n  if(!$store || $isServer){return}\n  const localChannelName: string | undefined = getChannelName(vm)\n  const localName: string = getName(vm, localStoreName, options)\n  const {isUsingName = true, isUsingSameStore = false} = options\n  // confirm root store has module for localChannelName\n  confirmChannel(vm, localChannelName)\n  // save local store status to use\n  vm[sLocalStoreStatus] = {\n    isUsingName,\n    isUsingSameStore,\n    name: localStoreName,\n    localName,\n    localConnectedName: null,\n  } as ILocalStoreOptions\n  // if already store has module skip creating module\n  if(isLocalStore($store, localName, localChannelName)){return}\n  // creating module\n  $store.registerModule(\n    localChannelName ? [localChannelName, localName] : [localName],\n    {\n      ...cloneDeep(store),\n      // force to be namespaced module\n      namespaced: true,\n    },\n  )\n}\n\nexport const unregisterLocal = (vm: IStoreVue<any>) => {\n  const {$store, $isServer} = vm\n  if($isServer){return}\n  const localStoreStatus = getLocalStoreState(vm)\n  const {localName, isUsingSameStore, name} = localStoreStatus\n  if(!$store || !localName){return}\n  const decrease = -1\n  const count: number = getNameNumber(vm, name, decrease)\n  if(!isUsingSameStore || count < 0){\n    const localStoreName: string = getLocalStoreName(vm)\n    const localStoreChannelName: string = getChannelName(vm)\n    $store.unregisterModule(joinNameSpace(localStoreName, localStoreChannelName))\n  }\n}\n","import {forEach} from 'lodash'\r\nimport {\r\n  getLocalActionGetter,\r\n  getLocalGetterGetter,\r\n  getLocalMutationGetter,\r\n  getLocalStateGetter,\r\n} from './module'\r\nimport {registerLocal} from './register'\r\nimport {ISetLocalStoreOptions} from './type'\r\n\r\n// eslint-disable-next-line func-style\r\nfunction mapFactory(maps, runner) {\r\n  const result = {}\r\n  forEach(maps, (map, key) => {\r\n    result[key] = runner(map)\r\n  })\r\n  return result\r\n}\r\n// tslint:disable-next-line: only-arrow-functions\r\nexport const mapLocalActions = function(maps: any) {\r\n  return mapFactory(maps, getLocalActionGetter)\r\n}\r\n\r\n// tslint:disable-next-line: only-arrow-functions\r\nexport const mapLocalGetters = function(maps: any) {\r\n  return mapFactory(maps, getLocalGetterGetter)\r\n}\r\n\r\n// tslint:disable-next-line: only-arrow-functions\r\nexport const mapLocalMutations = function(maps: any) {\r\n  return mapFactory(maps, getLocalMutationGetter)\r\n}\r\n\r\n// tslint:disable-next-line: only-arrow-functions\r\nexport const mapLocalState = function(maps: any) {\r\n  return mapFactory(maps, getLocalStateGetter)\r\n}\r\n\r\nexport const setLocalStore = (\r\n  targetVue: any, store: any, options: ISetLocalStoreOptions = {},\r\n): any => {\r\n  return {\r\n    extends: targetVue,\r\n    beforeCreate() {\r\n      const {name} = options\r\n      registerLocal(this, store, name, options)\r\n    },\r\n  }\r\n}\r\n","import {isFunction} from 'lodash'\nimport Vue, {ComponentOptions} from 'vue'\nimport vueComponent from 'vue-class-component'\nimport {Module} from 'vuex'\nimport {\n  LocalAction,\n  LocalGetter,\n  LocalMutation,\n  LocalState,\n  LocalStore,\n} from './decorators'\nimport {\n  mapLocalActions, mapLocalGetters, mapLocalMutations, mapLocalState, setLocalStore,\n} from './map-helper'\nimport {\n  getLocalActionGetter,\n  getLocalGetterGetter,\n  getLocalMutationGetter,\n  getLocalStateGetter,\n  getModuleByNameSpace,\n  getNameSpace,\n} from './module'\nimport {registerLocal, unregisterLocal} from './register'\nimport {\n  sLocalStoreChannelName,\n  sLocalStoreCounter,\n  sLocalStoreStatus,\n} from './symbols'\nimport {\n  INameCounter,\n  IPluginOptions,\n  ISetLocalStoreOptions,\n  ISetModuleNameOptions,\n  ISetStateResult,\n  IStoreVue,\n  TActionGetter,\n  TGetterGetter,\n  TMutationGetter,\n  TStateGetter,\n} from './type'\nexport {\n  sLocalStoreStatus,\n  sLocalStoreChannelName,\n  sLocalStoreCounter,\n}\nexport {\n  INameCounter,\n  IPluginOptions,\n  ISetLocalStoreOptions,\n  ISetModuleNameOptions,\n  IStoreVue,\n  TActionGetter,\n  TGetterGetter,\n  TMutationGetter,\n  TStateGetter,\n}\nexport {\n  getNameSpace,\n  getLocalMutationGetter,\n  getLocalActionGetter,\n  getLocalGetterGetter,\n  getModuleByNameSpace,\n  getLocalStateGetter,\n}\nexport {\n  LocalState,\n  LocalMutation,\n  LocalAction,\n  LocalStore,\n  LocalGetter,\n}\nexport {\n  mapLocalState,\n  mapLocalMutations,\n  mapLocalGetters,\n  mapLocalActions,\n  setLocalStore,\n}\n\n// let _Vue: Vue\n// noinspection JSUnusedGlobalSymbols\nlet registered: any\nexport default {\n  install(vue, options: IPluginOptions = {}) {\n    if(registered === vue){\n      if(process.env.NODE_ENV !== 'production'){\n        console.warn('[vuexl] install vuexl twice')\n      }\n    }\n    const {name, isNuxt = true} = options\n    if(!registered){\n      if(isNuxt){\n        vueComponent.registerHooks([\n          'beforeRouteEnter',\n          'beforeRouteLeave',\n          'asyncData',\n          'fetch',\n          'head',\n          'middleware',\n          'layout',\n          'transition',\n          'scrollToTop',\n          'validate',\n        ])\n      }\n      vueComponent.registerHooks([\n        'localStore',\n      ])\n    }\n    registered = vue\n    vue.prototype[sLocalStoreChannelName] = name\n    vue.prototype[sLocalStoreCounter] = {}\n    vue.mixin({\n      created() {\n        const {$options: {localStore}, $localStore} = this\n        const myLocalStore = localStore || $localStore\n        if(!isFunction(myLocalStore)){return}\n        const data: ISetStateResult = myLocalStore.call(this)\n        registerLocal(this, data.store, data.name, data.options)\n      },\n      beforeDestroy() {\n        unregisterLocal(this)\n      },\n    })\n  },\n}\ninterface IVuexlComponentOptions extends ComponentOptions<Vue>{\n  localStore: () => {\n    store: Module<any, any>,\n    name?: string,\n    options?: ISetLocalStoreOptions,\n  }\n}\n\n// eslint-disable-next-line func-style\nexport function Component(options: IVuexlComponentOptions) {\n  return vueComponent(options as ComponentOptions<Vue>)\n}\n"],"sourceRoot":""}